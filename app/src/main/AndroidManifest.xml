<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <!--
    Will need this once we go to app level 30 or 31.  These limit what other apps are installed
    and what our app is allowed to see.  This explicitly tells the OS that we want to interact
    with these other packages/intents/etc.
    Without this, we may not be able to receive Intents that tell us if a sent TXT message
    succeeded or the target phone received the TXT message.
    <queries>
        <intent>
            <action android:name="android.intent.action.SENDTO" />
            <data android:scheme="smsto"/>
        </intent>
    </queries>
    -->

    <uses-feature
        android:name="android.hardware.telephony"
        android:required="false" />

    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission
        android:name="android.permission.POST_NOTIFICATIONS"
        android:required="true" />
    <uses-permission
        android:name="android.permission.VIBRATE"
        android:required="false" />
    <uses-permission
        android:name="android.permission.SEND_SMS"
        android:required="false" />
    <uses-permission
        android:name="android.permission.SCHEDULE_EXACT_ALARM"
        android:required="true" />
    <uses-permission
        android:name="android.permission.CALL_PHONE" />


    <application
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:name=".MyApplication"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.AreYouOK"
        tools:targetApi="29">
        <activity
            android:name="MainActivity"
            android:exported="true"
            android:launchMode="singleTask"
            android:theme="@style/Theme.AreYouOK">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name=".alarms.RuokAlarmReceiver" />

        <!--
            Unlike other receivers, this has to be exported so the telephony system can send it
            intents.  When a TXT message is sent, we send a PendingIntent asking SMS to call us
            back when certain things happen, like sending the text message and if the other phone
            received the TXT message.
         -->
        <receiver
            android:name=".messaging.AlertErrorHandler"
            android:exported="true" />
    </application>

</manifest>
